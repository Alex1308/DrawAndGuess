<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Draw and Guess</title>
    <script src="/plugins/fabric.js"></script>
    <script src="/plugins/iro.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="/socket.io/socket.io.js"></script>

    <link rel="stylesheet" type="text/css" href="/css/Style.css">
</head>

<script>
    var id;
    $(function () {
        var socket = io();
        $('form').submit(function() {
            if ($('#usermsg').val() === "" || $('#username').val() === "") {
                return false;
            }
            socket.emit('chat message', $('#usermsg').val());
            $('#usermsg').val('');
            return false;
        });
        socket.on('socketID', function(socketID) {
            id = socketID;
        });
        socket.on('chat message', function(msg) {
            $('#messages').append($('<li>').text($('#username').val() + ": " + msg));
        });
        socket.on('new word', function(word) {
            console.log(word);
        });
        socket.on('json canvas', function(json) {
           console.log("hej jeg har modtaget din tegning");
        });
    });
</script>
<script>
    $(function() {
        var socket = io();
        if(canvas.isDrawingMode) {
            if(canvas.on("object:modified")) {
                json = saveCanvas();
                socket.emit('json canvas',json);
            }
        }
    });
</script>
<body onload="onload();">

<div id="Header" align="middle"><h1>Draw And Guess</h1></div>

<div class="container">
    <div id="toolwrapper">
        <div class="wheel" id="colorpicker" onclick="changeColor()"></div>
        <input class="size-slider" type="range" max="100" min="0" step="1" value="100" id="slider">
        <button onclick="erase()">Erase</button>
    </div>
    <div id="drawwrapper">
        <div id="drawingword"><h2>Someone else is drawing. Try to guess their drawing!</h2></div>
        <div id="drawfield">
            <canvas id="canvas" width="630" height="470"></canvas>
            <script src="/javascript/DrawingScript.js"></script>
        </div>
    </div>


    <div id="wrapper">
        <div id="menu">
            <p class="welcome" align="left">Welcome, <b><input id="username" type="text" id="username" size="45"/></b></p>
            <p class="logout"><a id="exit" href="#">Exit Chat</a></p>
            <div style="clear:both"></div>
        </div>

        <div id="chatbox">
            <ul id="messages"></ul>
        </div>

        <form name="message" action="">
            <input id="usermsg" type="text" id="usermsg" size="63"/>
            <input name="submitmsg" type="submit" id="submitmsg" value="Send"/>
        </form>
    </div>

</div>



</body>
</html>